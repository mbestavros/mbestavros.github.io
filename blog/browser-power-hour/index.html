<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>browser-power-hour, or: how to benchmark power efficiency of Android web browsers</title>
    <meta name="Description" content="Is your favorite browser a battery hog? Time to find out!">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon-rQlSQC1R.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32-DbIEtZTV.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16-Bb4t5jUq.png">
    <link rel="manifest" href="/assets/site-B6ULuQuI.webmanifest">
    <link rel="mask-icon" href="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='512.000000pt'%20height='512.000000pt'%20viewBox='0%200%20512.000000%20512.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cmetadata%3e%20Created%20by%20potrace%201.11,%20written%20by%20Peter%20Selinger%202001-2013%20%3c/metadata%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='%23000000'%20stroke='none'%3e%3cpath%20d='M0%202560%20l0%20-2560%202560%200%202560%200%200%202560%200%202560%20-2560%200%20-2560%200%200%20-2560z%20m2348%201413%20l-3%20-168%20-240%20-5%20c-260%20-5%20-273%20-8%20-338%20-69%20-73%20-67%20-87%20-133%20-87%20-423%200%20-273%20-10%20-342%20-67%20-458%20-26%20-54%20-56%20-95%20-107%20-146%20l-71%20-71%2065%20-64%20c90%20-89%20144%20-205%20166%20-359%205%20-30%208%20-190%209%20-355%200%20-287%201%20-302%2022%20-356%2057%20-139%20160%20-179%20466%20-179%20l177%200%200%20-165%200%20-165%20-196%200%20c-387%200%20-586%2057%20-726%20207%20-125%20135%20-153%20275%20-136%20693%2014%20355%20-1%20449%20-86%20516%20-50%2040%20-107%2054%20-223%2054%20l-103%200%200%20170%200%20170%20118%200%20c108%200%20121%203%20172%2028%2063%2032%2093%2071%20117%20151%2014%2046%2017%20104%2018%20331%201%20291%205%20326%2055%20450%2074%20188%20237%20315%20460%20359%2085%2017%20100%2018%20328%2020%20l212%201%20-2%20-167z%20m1002%20139%20c151%20-41%20259%20-105%20335%20-199%20122%20-149%20157%20-304%20148%20-645%20-8%20-252%2011%20-341%2084%20-410%2044%20-42%2079%20-51%20213%20-57%20l125%20-6%200%20-165%200%20-165%20-120%20-5%20c-139%20-6%20-203%20-30%20-243%20-89%20-45%20-68%20-47%20-94%20-44%20-471%203%20-411%20-3%20-465%20-68%20-596%20-111%20-226%20-334%20-314%20-795%20-314%20l-195%200%200%20165%200%20165%20178%200%20c262%200%20359%2027%20428%20117%2056%2073%2064%20139%2062%20480%20-2%20280%20-1%20303%2020%20378%2035%20126%2076%20201%20154%20278%2037%2037%2064%2067%2060%2067%20-19%200%20-133%20128%20-161%20180%20-75%20140%20-84%20196%20-85%20505%20-1%20244%20-3%20263%20-24%20315%20-12%2031%20-39%2073%20-60%2093%20-61%2060%20-101%2067%20-359%2067%20l-223%200%200%20171%200%20171%20248%20-5%20c206%20-4%20259%20-8%20322%20-25z'/%3e%3c/g%3e%3c/svg%3e" color="#3d5afe">
    <link rel="shortcut icon" href="/assets/favicon-DGeSMoRZ.ico">
    <meta name="msapplication-TileColor" content="#3d5afe">
    <meta name="msapplication-config" content="data:text/xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPGJyb3dzZXJjb25maWc+CiAgICA8bXNhcHBsaWNhdGlvbj4KICAgICAgICA8dGlsZT4KICAgICAgICAgICAgPHNxdWFyZTE1MHgxNTBsb2dvIHNyYz0iL2NvbnRlbnQvYXNzZXRzL21zdGlsZS0xNTB4MTUwLnBuZyIvPgogICAgICAgICAgICA8VGlsZUNvbG9yPiMzZDVhZmU8L1RpbGVDb2xvcj4KICAgICAgICA8L3RpbGU+CiAgICA8L21zYXBwbGljYXRpb24+CjwvYnJvd3NlcmNvbmZpZz4K">
    <meta name="theme-color" content="#3d5afe">
  <script type="module" crossorigin src="/assets/app-CgtYxWoa.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/app-DyxvPyLu.css">
</head>


<body class="mdc-typography">
    <header class="mdc-top-app-bar app-bar" id="app-bar">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
      <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button"
        onclick="window.location.href='/'">
        <div class="mdc-icon-button__ripple mdc-ripple-surface"></div>
        home
      </button>
      <span class="mdc-top-app-bar__title">Mark Bestavros</span>
    </section>
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
          <button
            class="navListLink mdc-typography--button mdc-top-app-bar__action-item mdc-button mdc-button--unelevated"
            id="about-button" onclick="window.location.href='/about/'">
            <div class="mdc-button__ripple"></div>
            <span class="mdc-button__label">About</span>
          </button>
          <button
            class="navListLink mdc-typography--button mdc-top-app-bar__action-item mdc-button mdc-button--unelevated"
            id="blog-button" onclick="window.location.href='/blog/'">
            <div class="mdc-button__ripple"></div>
            <span class="mdc-button__label">Blog</span>
          </button>
    </section>
  </div>
</header>

    <main class="main-content mdc-top-app-bar--fixed-adjust" id="main-content" aria-label="Content">
        <div class="mdc-layout-grid">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-2"></div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-8 main-content-container">
                    <div class="mdc-card card">
    <div class="post-title mdc-typography" id="article-titles">
        <h1 class="article-title mdc-typography--headline3" id="article-title">browser-power-hour, or: how to benchmark power efficiency of Android web browsers</h1>
        <h3 class="article-subtitle mdc-typography--headline6" id="article-subtitle">Is your favorite browser a battery hog? Time to find out!</h3>
    </div>
    
    <div class="post-content mdc-typography mdc-typography--body1">
        <h1>I made something cool!</h1>
<p>Today, I'm going to be talking about my most recent side project: <a href="https://github.com/mbestavros/browser-power-hour"><code>browser-power-hour</code></a>. In short, it's a tool that helps compare the power efficiency of different Android web browsers.</p>
<p>If you came here from <a href="">Reddit</a> or <a href="">Lemmy</a>, thanks for stopping by! Feel free to skip the first paragraph - you've already read it.</p>
<h2>Why is this benchmark important?</h2>
<p>In Android enthusiast communities, it's pretty common to see battery drain brought up as a reason to use (or avoid) certain web browsers, often without evidence. But browsers are complex and constantly evolving pieces of software... maybe those perceptions are out of date? Maybe they're still valid! Unlike raw performance, there are few, if any, good ways to reliably measure battery impact for an individual app, so it's hard to tell what's actually true. Hence, this project! My goal is to be able to provide <em>objective metrics</em> on browser power efficiency to demystify the battery impact question.</p>
<p><em>(Here's my personal, biased, motivation: I like Firefox on Android. I know it probably won't be quite as good as Chrome, a browser made by Google for Google's operating system, especially when running on Google's own Tensor chips... but is it actually materially, measurably worse? I want to test that!)</em></p>
<h2>But wait, phones don't give us a ton of useful battery detail to begin with. How can you reliably measure power consumption?</h2>
<p>Glad you asked! The answer is <a href="https://developer.android.com/topic/performance/power/setup-battery-historian">Battery Historian</a>. It's a pretty powerful tool, provided by the Android devs themselves, that can measure granular power usage <em>per app</em> on an Android test device. Exactly what we need!</p>
<p>However, all that data is only as meaningful as...</p>
<h2>The test's design</h2>
<p>It's helpful to keep in mind that we are benchmarking <em>the browsers themselves</em> - ideally, they should be the only variable. They should perform the exact same tasks as each other with the same time budget. Those tasks should be pretty variable but also repeatable - a mix of light web browsing tasks and harder, more intense things.</p>
<p>I decided on the following task list, which would be repeated across all browsers:</p>
<ul>
<li>Navigate to the <a href="https://browserbench.org/Speedometer3.0/">Speedometer 3.0 benchmark</a> and run it</li>
<li>Navigate to a number of different (primarily news) websites sequentially, and scroll up and down (in a consistent and repeatable way) on each one</li>
<li>Run the UFOTest benchmark for half a minute</li>
</ul>
<h3>Automating the task list</h3>
<p>I ended up going with what I knew best and wrote a Python script. It uses the <code>pure-python-adb</code> library to connect and send commands to an Android device.</p>
<p>The trickiest bit to get right was getting the script to activate the URL bar on different web browsers. My solution is hacky and horrible, but does work: a large dictionary that contains relative coordinate percentages for the URL bars of many popular web browsers. The script retrieves the device's screen resolution, then uses the relative coordinate value for the current browser to determine the pixel coordinates that should be used to tap on the URL bar. The same trick is used to start Speedometer.</p>
<p>This is the most error-prone part of the test, so it's important to supervise a test run for a bit and make sure that browser navigation and starting Speedometer runs work correctly.</p>
<h3>Getting the results</h3>
<p>Once the script is done running the task list for all browsers, it triggers a bug report and <code>batterystats</code> dump, which gets written to the computer that's running the Python script. Plug the bug report into the <a href="https://developer.android.com/topic/performance/power/setup-battery-historian#how-to">Battery Historian tool</a>, and results can be compared!</p>
<h2>Please contribute if you are able!</h2>
<p>If you actually want to run the benchmark yourself, do follow the <a href="https://github.com/mbestavros/browser-power-hour/blob/main/README.md#guide">README on Github</a> - it's far more comprehensive than this blog post. I also encourage you to contribute! Whether that's <a href="https://github.com/mbestavros/browser-power-hour/discussions/1">submitting results</a> for your device or code improvements, all are welcome!</p>

    </div>
    
        <div class="mdc-card__actions">
            <div class="mdc-card__action-buttons">
                <span class="mdc-evolution-chip-set" role="grid">
                    <span class="mdc-evolution-chip-set__chips" role="presentation">
                        
                        
                        
                        
                        <span class="mdc-evolution-chip" role="row" onclick="window.location.href='/blog/tags/tech'">
                            <span class="mdc-evolution-chip__cell mdc-evolution-chip__cell--primary" role="gridcell">
                                <button class="mdc-evolution-chip__action mdc-evolution-chip__action--primary" type="button" tabindex="-1">
                                    <span class="mdc-evolution-chip__ripple mdc-evolution-chip__ripple--primary"></span>
                                    <span class="mdc-evolution-chip__text-label">tech</span>
                                </button>
                            </span>
                        </span>
                        
                        
                        
                        <span class="mdc-evolution-chip" role="row" onclick="window.location.href='/blog/tags/development'">
                            <span class="mdc-evolution-chip__cell mdc-evolution-chip__cell--primary" role="gridcell">
                                <button class="mdc-evolution-chip__action mdc-evolution-chip__action--primary" type="button" tabindex="-1">
                                    <span class="mdc-evolution-chip__ripple mdc-evolution-chip__ripple--primary"></span>
                                    <span class="mdc-evolution-chip__text-label">development</span>
                                </button>
                            </span>
                        </span>
                        
                        
                        
                        <span class="mdc-evolution-chip" role="row" onclick="window.location.href='/blog/tags/android'">
                            <span class="mdc-evolution-chip__cell mdc-evolution-chip__cell--primary" role="gridcell">
                                <button class="mdc-evolution-chip__action mdc-evolution-chip__action--primary" type="button" tabindex="-1">
                                    <span class="mdc-evolution-chip__ripple mdc-evolution-chip__ripple--primary"></span>
                                    <span class="mdc-evolution-chip__text-label">android</span>
                                </button>
                            </span>
                        </span>
                        
                        
                    </span>
                </span>
            </div>
        </div>
    
</div>

                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-2"></div>
            </div>
        </div>
    </main>
</body>

<script data-goatcounter="https://mbestavros-personal-site.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

</html>
